<main>
    <header>
      <h1 class="title">Depolar</h1>
      <nav class="nav-tabs" id="nav-tabs">
      </nav>
    </header>
    <div class="content-columns" style="with: 100%">
      <table class="ui blue table">
        <thead>
          <tr>
            <th>Depo Adı</th>
            <th>Depo Numarası</th>
            <th>Toplam Ürün</th>
            <th> Malzeme Alarımı </th>
            <th>İşlem</th>
          </tr>
        </thead>
        <tbody>
          <% @storages_less.each do |s| %>
            <tr>
              <td><%= link_to s.name, materials_index_path(s.id)%> </td>
              <td><%= s.no %></td>
              <td><%= s.materials.count %></td>
              <td><i class="bell red icon"></i></td>
              <td>
                <a style="cursor: pointer" data-tooltip="Depoyu Düzenle" data-inverted=""><i class="edit icon" id="edit-storage-button-<%= s.id %>"></i></a>
                <div class="ui small modal" id="edit-storage-modal-<%= s.id %>">
                  <div class="header">Depo Düznle</div>
                  <div class="content">
                    <%= form_for(s, html: { class: "ui form" }, url: storage_path(s.id)) do |f| %>
                      <div class="field">
                        <label>Depo Adı</label>
                        <%= f.text_field :name, placeholder: "Depo Adı", require: true %>
                      </div>
                      <div class="field">
                        <label>Depo Numarası</label>
                        <%= f.text_field :no, placeholder: "Depo Numarası", require: true %>
                      </div>
                      <button class="ui primary right floated button" type="submit" style="margin-bottom:10px">Düzenle</button>
                    <% end %>
                  </div>
                </div>
                <script>
                  $('#edit-storage-button-<%= s.id%>').click(function(event) {
                      $('#edit-storage-modal-<%= s.id%>')
                          .modal({
                              autofocus: false
                          })
                          .modal('show');
                  })
                </script>
                <a style="cursor: pointer" data-tooltip="Depoyu Sil" data-inverted=""><i class="trash alternate red icon" id="delete-storage-button-<%= s.id %>"></i></a>
                <div class="ui basic mini modal" id="delete-storage-modal-<%= s.id %>">
                  <div class="ui icon header">
                    Depo Silme
                  </div>
                  <div class="content">
                    <p style="text-align: center;font-size: 16px">Depo silindiğinde içinideki <b style="color: brown">malzemelerde</b> silinecektir!</p>
                  </div>
                  <div class="actions">
                    <div class="ui basic cancel inverted button">
                      <i class="remove icon"></i>
                      İptal
                    </div>
                    <%= link_to storage_path(s.id),method: :delete do%>
                      <div class="ui red ok inverted button">
                          <i class="checkmark icon"></i>
                          Sil
                      </div>
                    <% end %>
                  </div>
                </div>
                <script>
                  $('#delete-storage-button-<%= s.id%>').click(function(event) {
                      $('#delete-storage-modal-<%= s.id%>')
                          .modal({
                              autofocus: false
                          })
                          .modal('show');
                  })
                </script>
              </td>
            </tr>
          <% end %>
          <% @storages_than.each do |s| %>
            <tr>
              <td><%= link_to s.name, materials_index_path(s.id)%> </td>
              <td><%= s.no %></td>
              <td><%= s.materials.count %></td>
              <td><i class="bell green icon"></i></td>
              <td>
                <a style="cursor: pointer" data-tooltip="Depoyu Düzenle" data-inverted=""><i class="edit icon" id="edit-storage-button-<%= s.id %>"></i></a>
                <div class="ui small modal" id="edit-storage-modal-<%= s.id %>">
                  <div class="header">Depo Düznle</div>
                  <div class="content">
                    <%= form_for(s, html: { class: "ui form" }, url: storage_path(s.id)) do |f| %>
                      <div class="field">
                        <label>Depo Adı</label>
                        <%= f.text_field :name, placeholder: "Depo Adı", require: true %>
                      </div>
                      <div class="field">
                        <label>Depo Numarası</label>
                        <%= f.text_field :no, placeholder: "Depo Numarası", require: true %>
                      </div>
                      <button class="ui primary right floated button" type="submit" style="margin-bottom:10px">Düzenle</button>
                    <% end %>
                  </div>
                </div>
                <script>
                  $('#edit-storage-button-<%= s.id%>').click(function(event) {
                      $('#edit-storage-modal-<%= s.id%>')
                          .modal({
                              autofocus: false
                          })
                          .modal('show');
                  })
                </script>
                <a style="cursor: pointer" data-tooltip="Depoyu Sil" data-inverted=""><i class="trash alternate red icon" id="delete-storage-button-<%= s.id %>"></i></a>
                <div class="ui basic mini modal" id="delete-storage-modal-<%= s.id %>">
                  <div class="ui icon header">
                    Depo Silme
                  </div>
                  <div class="content">
                    <p style="text-align: center;font-size: 16px">Depo silindiğinde içinideki <b style="color: brown">malzemelerde</b> silinecektir!</p>
                  </div>
                  <div class="actions">
                    <div class="ui basic cancel inverted button">
                      <i class="remove icon"></i>
                      İptal
                    </div>
                    <%= link_to storage_path(s.id),method: :delete do%>
                      <div class="ui red ok inverted button">
                          <i class="checkmark icon"></i>
                          Sil
                      </div>
                    <% end %>
                  </div>
                </div>
                <script>
                  $('#delete-storage-button-<%= s.id%>').click(function(event) {
                      $('#delete-storage-modal-<%= s.id%>')
                          .modal({
                              autofocus: false
                          })
                          .modal('show');
                  })
                </script>
              </td>
            </tr>
          <% end %>
        </tbody>
        <tfoot class="full-width">
           <tr>
             <th></th>
             <th colspan="4">
               <div class="ui right floated small primary labeled icon button" id="create-storage-button">
                 <i class="plus icon"></i> Depo Ekle
               </div>
             </th>
           </tr>
         </tfoot>
      </table>
    </div>
</main>
<div class="ui small modal" id="create-storage-modal">
  <div class="header">Depo Ekle</div>
  <div class="content">
    <%= form_for(@storage, html: { class: "ui form" }, url: '') do |f| %>
      <div class="field">
        <label>Depo Adı</label>
        <%= f.text_field :name, placeholder: "Depo Adı", require: true %>
      </div>
      <div class="field">
        <label>Depo Numarası</label>
        <%= f.text_field :no, placeholder: "Depo Numarası", require: true %>
      </div>
      <button class="ui primary right floated button" type="submit" style="margin-bottom:10px">Ekle</button>
    <% end %>
  </div>
</div>
<script>
  $('#create-storage-button').click(function(event) {
      $('#create-storage-modal')
          .modal({
              autofocus: false
          })
          .modal('show');
  })
</script>
